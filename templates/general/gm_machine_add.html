{% extends 'base.html'%}


{% block content %}

<section class="content">
    
    <div class="box" style="padding-top: 2%;">
    
        <form id="frmProject" class="form-horizontal" method="post">
            <!--<{% csrf_token %}
            {% if page_errors %}
                <div class="alert">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    <strong>ERROR!</strong>
                    Invalid username or password

                </div>
            {% endif %} -->
          
            <div class="form-group">
                <label class="col-sm-2 control-label">Hosts</label>
                <div class="col-sm-4">
                    <input id="hosts" name="hosts" type="text" required="required" class="form-control" placeholder="host name or group name" >
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label" >User</label>
                <div class="col-sm-4">
                    <input id="user" name="user" type="text" required="required" class="form-control"  placeholder="service">
                </div>
            </div>
            
            <div class="form-group">
                <label class="col-sm-2 control-label" >Password</label>
                <div class="col-sm-4">
                    <input id="password" name="password" type="password" class="form-control" >
                </div>
            </div>
            
            <div class="form-group">
                <label class="col-sm-2 control-label" >Port</label>
                <div class="col-sm-4">
                    <input id="port" name="port" type="text" class="form-control" value=22 >
                </div>
            </div>
            
            <div class="form-group">
                <label class="col-sm-2 control-label">SSH Public Key</label>
                <div class="col-sm-6">
                    <div id="sshkeyarea" class="input-append">
                        <textarea id="sshkey" name="sshkey" type="text" required="required" class="form-control" rows="5"></textarea>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label"></label>
                <div class="col-sm-2">
                    <button id="button_deploykey" type="button" class="btn btn-primary">Submit</button>
                </div>
            </div>
            
            <div class="form-group">
                <label class="col-sm-2 control-label">Result</label>
                <div class="col-sm-6">
                    <pre id="result_deploykey" class="prettyprint lang-yaml">
                    </pre>
                </div>
            </div>

        </form>
    </div>
    <!-- /.box -->

</section>

{% endblock %}

{% block script %}
<script>
    $(document).ready(function(){
        $("#button_deploykey").click(function(event){
            //if ( !$("#frmProject").valid() ){
            //    return
            //}
            $("#result_deploykey").html("Please Wait ....");
            $.ajax({
                type:"POST",
                data: {
                        hosts: $("#hosts").val(),
                        user: $("#user").val(),
                        password: $("#password").val(),
                        port: $("#port").val(),
                        sshkey: $("#sshkey").val()
                      },
                success: function(data) {
                   $("#result_deploykey").empty();
                   $("#result_deploykey").append(data+"<br/>")
                   console.log(data)
                   //for(var key in data[0]){
                   //    $("#result_deploykey").append(data[0][key]+"<br/>")
                   //}
                }
            });
       });

    });
</script>
{% endblock %}
